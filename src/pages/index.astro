---
import { CldUploadWidget } from "astro-cloudinary"
import Principal from "../layouts/Principal.astro"
---

<Principal title="Terror outfit generator">
	<header class="sm:pt-24 lg:pt-32 text-center">
		<h1 class="font-extrabold text-4xl sm:text-5xl lg:text-6xl tracking-tight">An AI-powered tool that transforms your outfit into spooky Halloween styles.</h1>
		<h2 class="mt-10 text-lg text-slate-600 max-w-3xl mx-auto">Whether you want to look like a vampire, devil, or something truly terrifying, our generator allows you to upload a photo or choose from various preset options to create a unique outfit.</h2>
	</header>
	<CldUploadWidget 
		id="upload-events"
		uploadPreset="upload-unsigned-images"
		options={{
			sources: ["local"],
			multiple: false,
			maxFiles: 1
		}}
	>
		<div class="text-center mt-10">
			<button class="text-white bg-sky-400 hover:bg-sky-500 focus:ring-4 focus:ring-blue-300 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center">Get started</button>
		</div>
	</CldUploadWidget>
</Principal>

<script>

	import { navigate } from 'astro:transitions/client'

	const widget = document.querySelector("#upload-events");

	if (widget) {

		//  successful upload
		widget.addEventListener('clduploadwidget:success', ((e: CustomEvent<{ info: { public_id: string } }>) => {

			const publicId = e.detail.info.public_id

			navigate(`/photo?id=${publicId}`)

		}) as EventListener)

	}

</script>
